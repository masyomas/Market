<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ“ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</title>
<style>
body { font-family:'Tahoma',sans-serif; background:#f9f9f9; margin:0; padding:0; text-align:center; direction:rtl;}
header { background:#17a2b8; color:#fff; padding:15px; font-size:22px;}
nav { background:#17a2b8; color:#fff; padding:8px; text-align:right;}
nav a { color:#fff; text-decoration:none; margin:0 5px; font-size:15px;}
nav a:hover { text-decoration:underline;}
main { margin:30px;}
input { padding:8px; margin:5px; font-size:15px; border:1px solid #ccc; border-radius:4px; width:220px;}
button { margin:5px; padding:6px 12px; font-size:14px; background:#17a2b8; color:#fff; border:none; border-radius:4px; cursor:pointer;}
button:hover { background:#117a8b;}
footer { background:#f1f1f1; text-align:center; padding:8px; font-size:13px; color:#777; border-top:1px solid #ddd;}
</style>
</head>
<body>

<header>ğŸ“ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</header>

<nav>
  <a href="index.html">ğŸ¬ Ø§Ù„Ù…ØªØ¬Ø±</a> |
  <a href="register.html">ğŸ“ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</a> |
  <a href="myPurchases.html">ğŸ›’ Ù…Ø´ØªØ±ÙŠØ§ØªÙŠ</a> |
  <a href="admin.html">âš™ï¸ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</a>
</nav>

<main>
  <h3>ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</h3>
  <input type="text" id="fullName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ"><br/>
  <input type="text" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ 11 Ø±Ù‚Ù…"><br/>
  <input type="number" id="userCode" placeholder="ÙƒÙˆØ¯ Ù…Ù† 2006 Ø­ØªÙ‰ 9998"><br/>
  <button onclick="registerUser()">ØªØ³Ø¬ÙŠÙ„</button>
</main>

<footer>ğŸ’ Powered by Almasa ğŸ’</footer>

<script>
function registerUser(){
  let name = document.getElementById('fullName').value.trim();
  let phone = document.getElementById('phone').value.trim();
  let code = parseInt(document.getElementById('userCode').value);

  // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ
  let words = name.split(' ').filter(w => w.length>0);
  if(words.length !== 3){
    alert("âŒ ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø«Ù„Ø§Ø«ÙŠÙ‹Ø§");
    return;
  }

  // ØªØ­Ù‚Ù‚ Ø£Ù† Ø§Ù„Ø§Ø³Ù… Ø­Ø±ÙˆÙ ÙÙ‚Ø· (Ø¹Ø±Ø¨ÙŠ Ø£Ùˆ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)
  let nameRegex = /^[\u0600-\u06FFa-zA-Z\s]+$/;
  if(!nameRegex.test(name)){
    alert("âŒ Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø­Ø±ÙˆÙÙ‹Ø§ ÙÙ‚Ø·");
    return;
  }

  // ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„: 11 Ø±Ù‚Ù… ÙŠØ¨Ø¯Ø£ Ø¨Ù€0
  let phoneRegex = /^0\d{10}$/;
  if(!phoneRegex.test(phone)){
    alert("âŒ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­ØŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 11 Ø±Ù‚Ù…Ù‹Ø§ ÙŠØ¨Ø¯Ø£ Ø¨Ù€0");
    return;
  }

  // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯: Ø¨ÙŠÙ† 2006 Ùˆ 9998
  if(code < 2006 || code > 9998){
    alert("âŒ Ø§Ù„ÙƒÙˆØ¯ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨ÙŠÙ† 2006 Ùˆ 9998");
    return;
  }

  let users = JSON.parse(localStorage.getItem('users') || "[]");

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø±
  if(users.some(u => u.code === code)){
    alert("âŒ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„");
    return;
  }
  if(users.some(u => u.name === name)){
    alert("âŒ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù… Ù…Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙØ¹Ù„");
    return;
  }
  if(users.some(u => u.phone === phone)){
    alert("âŒ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙØ¹Ù„");
    return;
  }

  // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  users.push({ name, phone, code });
  localStorage.setItem('users', JSON.stringify(users));

  alert("âœ… ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!");
  // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„
  document.getElementById('fullName').value = "";
  document.getElementById('phone').value = "";
  document.getElementById('userCode').value = "";
}
</script>

</body>
</html>