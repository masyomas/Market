<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
<style>
body { font-family:'Tahoma',sans-serif; margin:0; padding:0; text-align:center; background:#fff;}
header { background:#6c757d; color:#fff; padding:15px; font-size:22px;}
section { margin:20px auto; width:90%; max-width:400px;}
input { padding:6px; margin:6px auto; width:80%; max-width:250px;}
button { padding:6px 12px; margin-top:10px; font-size:14px; background:#6c757d; color:#fff; border:none; border-radius:4px; cursor:pointer;}
button:hover { background:#555;}
footer { background:#f1f1f1; text-align:center; padding:8px; font-size:13px; color:#777; border-top:1px solid #ddd;}
</style>
</head>
<body>

<header>ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</header>

<section>
  <input type="text" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„"><br/>
  <input type="number" id="code" placeholder="Ø§Ù„ÙƒÙˆØ¯"><br/>
  <button onclick="loginUser()">âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
</section>

<footer>ğŸ’ Powered by Almasa ğŸ’</footer>

<script>
// Ø¨ÙŠØ§Ù†Ø§Øª Ø³ÙˆØ¨Ø± Ø£Ø¯Ù…ÙŠÙ†
let superAdmin = { phone:"01552402913", code:790707071 };

// Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡ (ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡Ø§ Ù…Ù† localStorage Ø£Ùˆ Ø¥Ø¹Ø¯Ø§Ø¯Ù‡Ø§ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©)
let defaultAdmins = [
  {name:"admin1", phone:"01111111111", code:9999},
  {name:"admin2", phone:"01111111112", code:9998},
  {name:"admin3", phone:"01111111113", code:9997},
  {name:"admin4", phone:"01111111114", code:9996},
  {name:"admin5", phone:"01111111115", code:9995}
];
if(!localStorage.getItem('admins')){
  localStorage.setItem('admins', JSON.stringify(defaultAdmins));
}

function loginUser(){
  let phone=document.getElementById('phone').value.trim();
  let code=parseInt(document.getElementById('code').value.trim());
  if(!phone || isNaN(code)){ alert("âš ï¸ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ÙˆØ§Ù„ÙƒÙˆØ¯"); return; }

  let admins=JSON.parse(localStorage.getItem('admins')||"[]");

  if(phone===superAdmin.phone && code===superAdmin.code){
    // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ÙƒØ³ÙˆØ¨Ø± Ø£Ø¯Ù…ÙŠÙ†
    localStorage.setItem('loggedUser', JSON.stringify({name:"superadmin", code:superAdmin.code, phone:superAdmin.phone}));
    location.href="admin.html";
  }
  else if(admins.find(a=>a.phone===phone && a.code===code)){
    // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± Ø¹Ø§Ø¯ÙŠ
    let admin = admins.find(a=>a.phone===phone && a.code===code);
    localStorage.setItem('loggedUser', JSON.stringify({name:admin.name, code:admin.code, phone:admin.phone}));
    location.href="admin.html";
  }
  else if(code>=2006 && code<=9998){
    // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ÙƒØ¹Ù…ÙŠÙ„ Ø¹Ø§Ø¯ÙŠ
    let users=JSON.parse(localStorage.getItem('users')||"[]");
    let user=users.find(u=>u.phone===phone && u.code===code);
    if(user){
      localStorage.setItem('loggedUser', JSON.stringify({name:user.name, code:user.code, phone:user.phone}));
      location.href="myPurchases.html";
    } else {
      alert("âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    }
  }
  else{
    alert("âš ï¸ Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
  }
}

// Ø§Ù„ØªÙ‚Ø§Ø· ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ ÙÙŠ ØªØ¨ÙˆÙŠØ¨Ø© Ø£Ø®Ø±Ù‰
window.addEventListener('storage',function(e){
  if(e.key==='loggedUser' && e.newValue===null){
    alert("ğŸ‘‹ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬Ùƒ");
  }
});
</script>

</body>
</html>
